<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>TengriLZ</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style> #map{height:100vh} .lz{color:#00c26e;}</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map('map').setView([39.776,30.520], 12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);

async function loadLZ(lat, lon){
  const r = await fetch(`http://127.0.0.1:8000/candidates?lat=${lat}&lon=${lon}`);
  const gj = await r.json();
  L.geoJSON(gj, {
    style: {color:'#00c26e', weight:2, fillOpacity:0.2},
    onEachFeature: (f, layer)=>{
      const p=f.properties||{};
      layer.bindPopup(`<b>${p.id||'LZ'}</b><br/>avg slope: ${p.avg_slope_deg?.toFixed?.(1)}Â°`);
    }
  }).addTo(map);
}
loadLZ(39.776,30.520);
</script>
</body>
</html>
